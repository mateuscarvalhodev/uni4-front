<section class="page">
  <header class="page__header">
    <h2>{{ isEdit() ? 'Editar usuário' : 'Novo usuário' }}</h2>
  </header>

  <div class="card">
    <form [formGroup]="form" (ngSubmit)="save()" class="form">
      <label for="name">Nome</label>
      <input id="name" type="text" formControlName="name" placeholder="Nome completo" />
      @if (form.controls.name.touched && form.controls.name.invalid) {
      <div class="err">Informe o nome.</div>
      }

      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email" placeholder="email@uni4.com" />
      @if (form.controls.email.touched && form.controls.email.invalid) {
      <div class="err">Informe um email válido.</div>
      }

      <label for="role">Papel</label>
      <select id="role" formControlName="role">
        <option [ngValue]="''" disabled>Selecione...</option>
        @for (r of roles; track r) {
        <option [value]="r">{{ r }}</option>
        }
      </select>
      @if (form.controls.role.touched && form.controls.role.invalid) {
      <div class="err">Selecione um papel.</div>
      }

      <div class="actions">
        <a class="btn" routerLink="/app/users">Cancelar</a>
        <button class="btn btn--primary" [disabled]="form.invalid">
          {{ isEdit() ? 'Salvar' : 'Criar' }}
        </button>
      </div>
    </form>
  </div>
</section>
